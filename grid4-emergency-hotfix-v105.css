/* GRID4 EMERGENCY HOTFIX v1.0.5 - AGGRESSIVE CROSS-BROWSER FIXES */
/* Targets: Chrome inconsistencies, Edge compatibility, logo integration failures */

/* CRITICAL: Force CSS load order and browser-specific resets */
@charset "UTF-8";

/* UNIVERSAL RESET - RADICAL LAYOUT ARCHITECTURE */
*,
*::before,
*::after {
    box-sizing: border-box !important;
}

/* KILL ALL HORIZONTAL OVERFLOW AT THE ROOT - NO EXCEPTIONS */
html {
    width: 100vw !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
}

body {
    width: 100vw !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* AGGRESSIVE OVERFLOW PREVENTION - KILL EVERY POSSIBLE CULPRIT */
body.grid4-emergency-active * {
    max-width: 100% !important;
}

/* VIEWPORT CONSTRAINED LAYOUT - FORCE ALL ELEMENTS TO RESPECT BOUNDARIES */
body.grid4-emergency-active > *,
body.grid4-emergency-active #wrapper,
body.grid4-emergency-active .wrapper,
body.grid4-emergency-active .container,
body.grid4-emergency-active .row {
    max-width: 100vw !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
}

/* SPECIFIC FIX: Kill the problematic fixed-container element */
.fixed-container,
div.fixed-container,
body.grid4-emergency-active .fixed-container,
body.grid4-emergency-active div.fixed-container,
.fixed-container.grid4-overflow-fixed {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
    overflow-x: hidden !important;
}

/* NUCLEAR OPTION: Any element exactly 1920px wide */
*[style*="width: 1920px"],
*[style*="width:1920px"] {
    width: 100% !important;
}

/* CRITICAL TABLE OVERFLOW FIXES - ADDRESS 18-COLUMN TABLES */
/* Force all tables into responsive containers with horizontal scroll */
table {
    width: 100% !important;
    max-width: 100% !important;
    table-layout: auto !important;
}

/* Wrap all tables in scrollable containers */
body.grid4-emergency-active table {
    display: block !important;
    width: 100% !important;
    overflow-x: auto !important;
    white-space: nowrap !important;
}

body.grid4-emergency-active table thead,
body.grid4-emergency-active table tbody,
body.grid4-emergency-active table tr {
    display: table !important;
    width: 100% !important;
    table-layout: fixed !important;
}

/* Force table cells to respect container width */
body.grid4-emergency-active table th,
body.grid4-emergency-active table td {
    min-width: 80px !important;
    max-width: 200px !important;
    text-overflow: ellipsis !important;
    overflow: hidden !important;
    white-space: nowrap !important;
}

/* CONTENT WRAPPER OVERFLOW FIXES */
#content,
.grid4-content-enhanced,
div.grid4-content-enhanced {
    width: calc(100vw - 240px) !important;
    max-width: calc(100vw - 240px) !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
    margin-left: 220px !important;
    padding: 20px !important;
}

/* RESPONSIVE CONTENT ADJUSTMENTS */
@media (max-width: 1200px) {
    #content,
    .grid4-content-enhanced,
    div.grid4-content-enhanced {
        width: calc(100vw - 200px) !important;
        max-width: calc(100vw - 200px) !important;
        margin-left: 180px !important;
        padding: 15px !important;
    }
}

@media (max-width: 768px) {
    #content,
    .grid4-content-enhanced,
    div.grid4-content-enhanced {
        width: 100vw !important;
        max-width: 100vw !important;
        margin-left: 0 !important;
        padding: 10px !important;
    }
}

/* TABLE CONTAINER RESPONSIVE WRAPPER */
body.grid4-emergency-active .wrapper {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: auto !important;
    box-sizing: border-box !important;
}

/* AGGRESSIVE CONTENT WRAPPING */
body.grid4-emergency-active table,
body.grid4-emergency-active tr,
body.grid4-emergency-active td,
body.grid4-emergency-active th,
body.grid4-emergency-active div,
body.grid4-emergency-active span,
body.grid4-emergency-active p,
body.grid4-emergency-active pre,
body.grid4-emergency-active code {
    word-wrap: break-word !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
}

/* ============================================================================
   GRID4 DESIGN SYSTEM - Three-Layer Theming Architecture
   ============================================================================ */

/* LAYER 1: STRUCTURAL TOKENS (Theme-Agnostic) - Connect components to themes */
:root {
    /* Layout System */
    --g4-sidebar-width: 220px;
    --g4-content-offset: var(--g4-sidebar-width);
    --g4-header-height: 60px;
    --g4-border-radius: 8px;
    --g4-border-radius-sm: 4px;
    --g4-border-radius-lg: 12px;
    
    /* Spacing Scale */
    --g4-space-xs: 4px;
    --g4-space-sm: 8px;
    --g4-space-md: 16px;
    --g4-space-lg: 24px;
    --g4-space-xl: 32px;
    
    /* Typography */
    --g4-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --g4-font-size-sm: 14px;
    --g4-font-size-base: 16px;
    --g4-font-size-lg: 18px;
    
    /* Semantic Colors (Connect to palette) */
    --g4-text-primary: var(--g4-palette-text-900);
    --g4-text-secondary: var(--g4-palette-text-600);
    --g4-text-muted: var(--g4-palette-text-400);
    --g4-bg-primary: var(--g4-palette-bg-primary);
    --g4-bg-secondary: var(--g4-palette-bg-secondary);
    --g4-bg-tertiary: var(--g4-palette-bg-tertiary);
    --g4-border-color: var(--g4-palette-border);
    --g4-border-interactive: var(--g4-palette-border-interactive);
    --g4-accent-primary: var(--g4-palette-accent-500);
    --g4-accent-hover: var(--g4-palette-accent-600);
    --g4-success: var(--g4-palette-success);
    --g4-warning: var(--g4-palette-warning);
    --g4-error: var(--g4-palette-error);
}

/* LAYER 2: DARK THEME PALETTE (Default for now) */
:root {
    --g4-palette-text-900: #f9fafb;
    --g4-palette-text-600: #d1d5db;
    --g4-palette-text-400: #9ca3af;
    --g4-palette-bg-primary: #1a2332;
    --g4-palette-bg-secondary: #1e2736;
    --g4-palette-bg-tertiary: #374151;
    --g4-palette-border: #4b5563;
    --g4-palette-border-interactive: #6b7280;
    --g4-palette-accent-500: #00d4ff;
    --g4-palette-accent-600: #0ea5e9;
    --g4-palette-success: #10b981;
    --g4-palette-warning: #f59e0b;
    --g4-palette-error: #ef4444;
}

/* LAYER 3: LIGHT THEME PALETTE (Future Implementation) */
.theme-light {
    --g4-palette-text-900: #111827;
    --g4-palette-text-600: #4b5563;
    --g4-palette-text-400: #9ca3af;
    --g4-palette-bg-primary: #ffffff;
    --g4-palette-bg-secondary: #f9fafb;
    --g4-palette-bg-tertiary: #f3f4f6;
    --g4-palette-border: #e5e7eb;
    --g4-palette-border-interactive: #d1d5db;
    --g4-palette-accent-500: #3b82f6;
    --g4-palette-accent-600: #2563eb;
    --g4-palette-success: #059669;
    --g4-palette-warning: #d97706;
    --g4-palette-error: #dc2626;
}

/* EMERGENCY CSS SCOPING - Prevent NetSapiens conflicts */
#grid4-emergency-scope,
body.grid4-hotfix {
    /* Variables now in :root for global access */
}

/* SIMPLIFIED LAYOUT - NO CSS GRID (TEMP FIX FOR CONTENT VISIBILITY) */
body.grid4-emergency-active {
    display: block !important;
    width: 100vw !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
    background: var(--g4-bg-primary) !important;
}

/* SIDEBAR - SIMPLIFIED POSITIONING */
body.grid4-emergency-active #navigation,
html body.grid4-emergency-active #navigation,
#navigation.grid4-navigation-enhanced,
.navigation.grid4-navigation-enhanced,
[id="navigation"].grid4-navigation-enhanced {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: var(--g4-sidebar-width) !important;
    height: 100vh !important;
    background: var(--g4-bg-secondary) !important;
    z-index: 1000 !important;
    display: flex !important;
    flex-direction: column !important;
    border-right: 1px solid var(--g4-border-color) !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    transform: none !important;
}

/* MAIN CONTENT - OFFSET FOR SIDEBAR */
body.grid4-emergency-active #content#content,
body.grid4-emergency-active #content,
html body.grid4-emergency-active #content,
#content.grid4-content-enhanced,
.content.grid4-content-enhanced,
[id="content"].grid4-content-enhanced {
    margin-left: var(--g4-sidebar-width) !important;
    margin-top: 0 !important;
    margin-right: 0 !important;
    margin-bottom: 0 !important;
    padding: var(--g4-space-lg) !important;
    background: var(--g4-bg-primary) !important;
    color: var(--g4-text-primary) !important;
    width: auto !important;
    max-width: none !important;
    min-height: 100vh !important;
    position: relative !important;
    z-index: 1 !important;
    overflow-y: visible !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
}

/* AGGRESSIVE WRAPPER FIX - KILL ALL WHITE BACKGROUNDS */
.wrapper,
div.wrapper,
#content .wrapper,
body .wrapper,
body.grid4-emergency-active .wrapper,
body.grid4-emergency-active #content .wrapper,
body.grid4-emergency-active div.wrapper,
.wrapper.grid4-wrapper-enhanced,
#content .wrapper.grid4-wrapper-enhanced {
    background: var(--g4-bg-primary) !important;
    background-color: var(--g4-bg-primary) !important;
    color: var(--g4-text-primary) !important;
}

/* ENHANCED NAVIGATION - Modern, polished design system */
#nav-buttons.grid4-nav-buttons-enhanced,
#navigation #nav-buttons.grid4-nav-buttons-enhanced,
body.grid4-emergency-active #nav-buttons,
body.grid4-emergency-active #navigation #nav-buttons {
    display: flex !important;
    flex-direction: column !important;
    padding: 24px 12px !important;
    gap: 2px !important;
    width: 100% !important;
}

/* COMPLETELY REDESIGNED NAVIGATION LINKS - CLEAN AND MODERN */
#nav-buttons.grid4-nav-buttons-enhanced a,
#navigation #nav-buttons.grid4-nav-buttons-enhanced a,
body.grid4-emergency-active #nav-buttons a,
body.grid4-emergency-active #navigation #nav-buttons a,
a.grid4-nav-link {
    display: flex !important;
    align-items: center !important;
    padding: 16px 20px !important;
    margin: 4px 12px !important;
    color: var(--g4-text-secondary) !important;
    text-decoration: none !important;
    border-radius: 12px !important;
    transition: all 0.15s ease !important;
    font-size: 15px !important;
    font-weight: 500 !important;
    line-height: 1.2 !important;
    background: transparent !important;
    border: 1px solid transparent !important;
    position: relative !important;
    min-height: 48px !important;
    overflow: hidden !important;
}

/* MODERN HOVER AND ACTIVE STATES - CLEAN DESIGN */
#nav-buttons.grid4-nav-buttons-enhanced a:hover,
#navigation #nav-buttons.grid4-nav-buttons-enhanced a:hover,
body.grid4-emergency-active #nav-buttons a:hover,
a.grid4-nav-link:hover {
    background: rgba(255, 255, 255, 0.05) !important;
    color: var(--g4-text-primary) !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
}

#nav-buttons.grid4-nav-buttons-enhanced a.active,
#navigation #nav-buttons.grid4-nav-buttons-enhanced a.active,
body.grid4-emergency-active #nav-buttons a.active,
a.grid4-nav-link.active {
    background: var(--g4-accent-primary) !important;
    color: white !important;
    font-weight: 600 !important;
    border-color: var(--g4-accent-primary) !important;
}

/* CLEAN ICON STYLING - PROPER SIZING AND SPACING */
#nav-buttons.grid4-nav-buttons-enhanced a img,
#navigation #nav-buttons.grid4-nav-buttons-enhanced a img,
body.grid4-emergency-active #nav-buttons a img {
    margin-right: 16px !important;
    width: 20px !important;
    height: 20px !important;
    opacity: 0.9 !important;
    transition: opacity 0.15s ease !important;
    filter: brightness(1) !important;
    flex-shrink: 0 !important;
    object-fit: contain !important;
}

#nav-buttons.grid4-nav-buttons-enhanced a:hover img,
#navigation #nav-buttons.grid4-nav-buttons-enhanced a:hover img,
body.grid4-emergency-active #nav-buttons a:hover img,
#nav-buttons.grid4-nav-buttons-enhanced a.active img,
#navigation #nav-buttons.grid4-nav-buttons-enhanced a.active img,
body.grid4-emergency-active #nav-buttons a.active img {
    opacity: 1 !important;
}

/* LOGO STYLING - JS handles replacement, CSS handles sizing */
.grid4-injected-logo,
img[alt*="Grid4"],
img[title*="Grid4"] {
    width: auto !important;
    height: 50px !important;
    max-width: 160px !important;
    object-fit: contain !important;
}

/* HEADER FIXES - Prevent logo conflicts */
#header,
.header,
.top-header {
    background: var(--g4-dark-surface) !important;
    border-bottom: 1px solid var(--g4-border) !important;
    padding: 10px 20px !important;
    position: relative !important;
    z-index: 100 !important;
}

/* TABLE CONTRAST FIXES - High specificity */
table thead th,
.table thead th,
#content table thead th,
table > thead > tr > th {
    background-color: var(--g4-dark-surface) !important;
    color: var(--g4-text-light) !important;
    border-bottom: 1px solid var(--g4-border) !important;
    font-weight: 600 !important;
    padding: 12px !important;
}

table tbody td,
.table tbody td,
#content table tbody td {
    background-color: rgba(30, 39, 54, 0.5) !important;
    color: var(--g4-text-light) !important;
    border-bottom: 1px solid rgba(55, 65, 81, 0.3) !important;
    padding: 10px 12px !important;
}

/* FORM ELEMENTS - Dark theme fixes */
input, select, textarea, button {
    background-color: var(--g4-dark-surface) !important;
    color: var(--g4-text-light) !important;
    border: 1px solid var(--g4-border) !important;
    border-radius: 4px !important;
}

input:focus, select:focus, textarea:focus {
    border-color: var(--g4-primary) !important;
    box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2) !important;
    outline: none !important;
}

/* BUTTON FIXES */
button, .btn, input[type="submit"], input[type="button"] {
    background-color: var(--g4-primary) !important;
    color: white !important;
    border: none !important;
    padding: 8px 16px !important;
    border-radius: 4px !important;
    cursor: pointer !important;
}

button:hover, .btn:hover {
    background-color: #5a6fd8 !important;
}

/* BROWSER-SPECIFIC FIXES */

/* CHROME SPECIFIC */
@supports (-webkit-appearance: none) {
    #content {
        -webkit-transform: translateZ(0) !important;
        transform: translateZ(0) !important;
    }
}

/* MODERN EDGE (Chromium-based) - No special rules needed */

/* FIREFOX SPECIFIC */
@-moz-document url-prefix() {
    #navigation {
        scrollbar-width: thin !important;
        scrollbar-color: var(--g4-border) transparent !important;
    }
}

/* COMPREHENSIVE RESPONSIVE DESIGN */

/* Global responsive fixes */
body.grid4-emergency-active * {
    box-sizing: border-box !important;
}

/* Prevent horizontal overflow at the root level */
body.grid4-emergency-active {
    overflow-x: hidden !important;
    width: 100vw !important;
    max-width: 100vw !important;
}

/* RESPONSIVE TABLE CONTAINER PATTERN - CONTAINED SCROLLING */
body.grid4-emergency-active .table-responsive,
body.grid4-emergency-active .table-container {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: auto !important;
    overflow-y: visible !important;
    border-radius: var(--g4-border-radius) !important;
    border: 1px solid var(--g4-border-color) !important;
    background: var(--g4-bg-secondary) !important;
    margin-bottom: var(--g4-space-lg) !important;
}

/* TABLE ENHANCEMENT - PROPER RESPONSIVE BEHAVIOR */
body.grid4-emergency-active table,
body.grid4-emergency-active .table {
    width: 100% !important;
    min-width: 600px !important;
    max-width: none !important;
    table-layout: auto !important;
    border-collapse: collapse !important;
    margin: 0 !important;
    background: var(--g4-bg-secondary) !important;
}

body.grid4-emergency-active table th,
body.grid4-emergency-active table td {
    padding: 12px 16px !important;
    text-align: left !important;
    border-bottom: 1px solid var(--g4-border-color) !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    min-width: 100px !important;
    max-width: 300px !important;
}

/* Form elements responsive */
body.grid4-emergency-active input,
body.grid4-emergency-active select,
body.grid4-emergency-active textarea {
    max-width: 100% !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Button groups responsive */
body.grid4-emergency-active .button-group,
body.grid4-emergency-active .btn-group {
    flex-wrap: wrap !important;
    gap: var(--g4-space-sm) !important;
}

/* TABLET RESPONSIVE */
@media (max-width: 1024px) {
    :root {
        --g4-sidebar-width: 200px;
        --g4-content-offset: 200px;
    }
    
    body.grid4-emergency-active #content {
        padding: var(--g4-space-md) !important;
    }
    
    body.grid4-emergency-active table th,
    body.grid4-emergency-active table td {
        max-width: 150px !important;
        font-size: 13px !important;
    }
}

/* MOBILE RESPONSIVE - GRID ARCHITECTURE ADAPTATION */
@media (max-width: 768px) {
    :root {
        --g4-sidebar-width: 280px;
    }
    
    /* MOBILE GRID LAYOUT - OVERLAY SIDEBAR */
    body.grid4-emergency-active {
        grid-template-columns: 1fr !important;
        grid-template-areas: "main" !important;
    }
    
    body.grid4-emergency-active #navigation {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: var(--g4-sidebar-width) !important;
        height: 100vh !important;
        z-index: 10000 !important;
        transform: translateX(-100%) !important;
        transition: transform 0.3s ease !important;
        box-shadow: 4px 0 12px rgba(0, 0, 0, 0.3) !important;
    }
    
    body.grid4-emergency-active #navigation.mobile-open {
        transform: translateX(0) !important;
    }
    
    body.grid4-emergency-active #content {
        grid-area: main !important;
        padding: var(--g4-space-md) !important;
    }
    
    /* MOBILE TABLE RESPONSIVE */
    body.grid4-emergency-active table {
        min-width: 500px !important;
        font-size: 14px !important;
    }
    
    body.grid4-emergency-active table th,
    body.grid4-emergency-active table td {
        min-width: 80px !important;
        max-width: 150px !important;
        padding: 10px 8px !important;
    }
    
    /* MOBILE NAVIGATION */
    body.grid4-emergency-active #nav-buttons a {
        padding: 18px 20px !important;
        font-size: 16px !important;
        min-height: 56px !important;
    }
    
    /* MOBILE HAMBURGER MENU TRIGGER */
    .mobile-menu-trigger {
        position: fixed !important;
        top: 20px !important;
        left: 20px !important;
        width: 44px !important;
        height: 44px !important;
        background: var(--g4-accent-primary) !important;
        border-radius: 8px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        z-index: 10001 !important;
        cursor: pointer !important;
        color: white !important;
        font-size: 18px !important;
    }
}

/* FORCE FEATURE FLAG UI VISIBILITY */
.g4-ff-modal,
.feature-flag-modal,
[class*="feature-flag"] {
    z-index: 99999 !important;
    position: fixed !important;
}

/* TEXT CONTRAST EMERGENCY FIXES */
.g4-ff-card-title,
.feature-card-title {
    color: var(--g4-text-light) !important;
}

.g4-ff-card-description,
.feature-card-description {
    color: #d1d5db !important;
}

/* NOTIFICATION/ALERT FIXES */
.alert, .notification, .message {
    background-color: var(--g4-dark-surface) !important;
    color: var(--g4-text-light) !important;
    border: 1px solid var(--g4-border) !important;
}

/* DEBUG LOADING HINT - Only shows when ?grid4_debug=true */
body[data-grid4-debug="true"]::before {
    content: "Grid4 Emergency Hotfix v1.0.5 Loading..." !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    background: var(--g4-primary) !important;
    color: white !important;
    padding: 5px 10px !important;
    font-size: 12px !important;
    z-index: 999999 !important;
    opacity: 0 !important;
    pointer-events: none !important;
    animation: g4-load-hint 2s ease-out !important;
}

@keyframes g4-load-hint {
    0% { opacity: 1; }
    50% { opacity: 1; }
    100% { opacity: 0; }
}

/* ============================================================================
   COMPREHENSIVE CONTENT PANEL THEMING - Fix white panels from screenshots
   ============================================================================ */

/* CONTENT PANELS - Dark theme all white panels shown in user screenshots */
body.grid4-emergency-active .content-panel,
body.grid4-emergency-active .panel,
body.grid4-emergency-active .widget,
body.grid4-emergency-active .box,
body.grid4-emergency-active .card,
body.grid4-emergency-active .container-fluid,
body.grid4-emergency-active .well,
body.grid4-emergency-active .module,
body.grid4-emergency-active .section,
body.grid4-emergency-active [class*="panel"],
body.grid4-emergency-active [class*="widget"],
body.grid4-emergency-active [class*="box"] {
    background: var(--g4-bg-secondary) !important;
    color: var(--g4-text-primary) !important;
    border: 1px solid var(--g4-border-color) !important;
    border-radius: var(--g4-border-radius) !important;
    padding: var(--g4-space-lg) !important;
}

/* FORM CONTAINERS - Dark theme all form backgrounds */
body.grid4-emergency-active form,
body.grid4-emergency-active .form-container,
body.grid4-emergency-active .form-group,
body.grid4-emergency-active .form-panel,
body.grid4-emergency-active fieldset,
body.grid4-emergency-active .field-container {
    background: var(--g4-bg-secondary) !important;
    color: var(--g4-text-primary) !important;
    border-color: var(--g4-border-color) !important;
}

/* TABLE ENHANCEMENTS - Modern dark table styling */
body.grid4-emergency-active table,
body.grid4-emergency-active .table,
body.grid4-emergency-active .data-table {
    background: var(--g4-bg-secondary) !important;
    border-collapse: separate !important;
    border-spacing: 0 !important;
    border-radius: var(--g4-border-radius) !important;
    overflow: hidden !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;
}

body.grid4-emergency-active table tr:nth-child(even),
body.grid4-emergency-active .table tr:nth-child(even) {
    background: rgba(55, 65, 81, 0.3) !important;
}

body.grid4-emergency-active table tr:hover,
body.grid4-emergency-active .table tr:hover {
    background: rgba(0, 212, 255, 0.1) !important;
    transition: background-color 0.2s ease !important;
}

/* INPUT FIELD ENHANCEMENTS - Consistent form styling */
body.grid4-emergency-active input[type="text"],
body.grid4-emergency-active input[type="email"],
body.grid4-emergency-active input[type="password"],
body.grid4-emergency-active input[type="number"],
body.grid4-emergency-active input[type="tel"],
body.grid4-emergency-active input[type="url"],
body.grid4-emergency-active input[type="search"],
body.grid4-emergency-active textarea,
body.grid4-emergency-active select {
    background: var(--g4-bg-tertiary) !important;
    color: var(--g4-text-primary) !important;
    border: 1px solid var(--g4-border-color) !important;
    border-radius: var(--g4-border-radius-sm) !important;
    padding: var(--g4-space-sm) var(--g4-space-md) !important;
    font-size: var(--g4-font-size-base) !important;
    transition: border-color 0.2s ease, box-shadow 0.2s ease !important;
}

body.grid4-emergency-active input:focus,
body.grid4-emergency-active textarea:focus,
body.grid4-emergency-active select:focus {
    border-color: var(--g4-accent-primary) !important;
    box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2) !important;
    outline: none !important;
}

/* BUTTON SYSTEM - Modern button styling using design tokens */
body.grid4-emergency-active button,
body.grid4-emergency-active .btn,
body.grid4-emergency-active input[type="submit"],
body.grid4-emergency-active input[type="button"],
body.grid4-emergency-active .button {
    background: var(--g4-accent-primary) !important;
    color: var(--g4-text-primary) !important;
    border: none !important;
    border-radius: var(--g4-border-radius-sm) !important;
    padding: var(--g4-space-sm) var(--g4-space-lg) !important;
    font-size: var(--g4-font-size-base) !important;
    font-weight: 500 !important;
    cursor: pointer !important;
    transition: background-color 0.2s ease, transform 0.1s ease !important;
}

body.grid4-emergency-active button:hover,
body.grid4-emergency-active .btn:hover {
    background: var(--g4-accent-hover) !important;
    transform: translateY(-1px) !important;
}

body.grid4-emergency-active button:active,
body.grid4-emergency-active .btn:active {
    transform: translateY(0) !important;
}

/* SUCCESS/WARNING/ERROR BUTTONS */
body.grid4-emergency-active .btn-success,
body.grid4-emergency-active button.success {
    background: var(--g4-success) !important;
}

body.grid4-emergency-active .btn-warning,
body.grid4-emergency-active button.warning {
    background: var(--g4-warning) !important;
}

body.grid4-emergency-active .btn-danger,
body.grid4-emergency-active .btn-error,
body.grid4-emergency-active button.danger,
body.grid4-emergency-active button.error {
    background: var(--g4-error) !important;
}

/* MODAL DIALOGS - Dark theme all modals */
body.grid4-emergency-active .modal,
body.grid4-emergency-active .modal-dialog,
body.grid4-emergency-active .modal-content,
body.grid4-emergency-active .dialog,
body.grid4-emergency-active .popup {
    background: var(--g4-bg-secondary) !important;
    color: var(--g4-text-primary) !important;
    border: 1px solid var(--g4-border-color) !important;
    border-radius: var(--g4-border-radius) !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5) !important;
}

body.grid4-emergency-active .modal-header,
body.grid4-emergency-active .dialog-header {
    background: var(--g4-bg-tertiary) !important;
    color: var(--g4-text-primary) !important;
    border-bottom: 1px solid var(--g4-border-color) !important;
    padding: var(--g4-space-lg) !important;
}

body.grid4-emergency-active .modal-footer,
body.grid4-emergency-active .dialog-footer {
    background: var(--g4-bg-tertiary) !important;
    border-top: 1px solid var(--g4-border-color) !important;
    padding: var(--g4-space-lg) !important;
}

/* DROPDOWN MENUS - Dark theme all dropdowns */
body.grid4-emergency-active .dropdown-menu,
body.grid4-emergency-active .menu,
body.grid4-emergency-active .submenu,
body.grid4-emergency-active select option {
    background: var(--g4-bg-secondary) !important;
    color: var(--g4-text-primary) !important;
    border: 1px solid var(--g4-border-color) !important;
    border-radius: var(--g4-border-radius-sm) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

body.grid4-emergency-active .dropdown-menu li a,
body.grid4-emergency-active .menu-item {
    color: var(--g4-text-primary) !important;
    padding: var(--g4-space-sm) var(--g4-space-md) !important;
    transition: background-color 0.2s ease !important;
}

body.grid4-emergency-active .dropdown-menu li a:hover,
body.grid4-emergency-active .menu-item:hover {
    background: var(--g4-bg-tertiary) !important;
    color: var(--g4-accent-primary) !important;
}

/* TABS - Dark theme tab navigation */
body.grid4-emergency-active .nav-tabs,
body.grid4-emergency-active .tabs,
body.grid4-emergency-active .tab-nav {
    border-bottom: 1px solid var(--g4-border-color) !important;
    background: transparent !important;
}

body.grid4-emergency-active .nav-tabs li a,
body.grid4-emergency-active .tab {
    background: var(--g4-bg-tertiary) !important;
    color: var(--g4-text-secondary) !important;
    border: 1px solid var(--g4-border-color) !important;
    border-bottom: none !important;
    padding: var(--g4-space-sm) var(--g4-space-lg) !important;
    margin-right: 2px !important;
    border-radius: var(--g4-border-radius-sm) var(--g4-border-radius-sm) 0 0 !important;
    transition: all 0.2s ease !important;
}

body.grid4-emergency-active .nav-tabs li.active a,
body.grid4-emergency-active .tab.active {
    background: var(--g4-bg-secondary) !important;
    color: var(--g4-text-primary) !important;
    border-bottom: 1px solid var(--g4-bg-secondary) !important;
}

/* BREADCRUMBS - Dark theme navigation breadcrumbs */
body.grid4-emergency-active .breadcrumb,
body.grid4-emergency-active .breadcrumbs {
    background: var(--g4-bg-tertiary) !important;
    color: var(--g4-text-secondary) !important;
    border-radius: var(--g4-border-radius-sm) !important;
    padding: var(--g4-space-sm) var(--g4-space-md) !important;
}

body.grid4-emergency-active .breadcrumb a {
    color: var(--g4-accent-primary) !important;
    text-decoration: none !important;
}

body.grid4-emergency-active .breadcrumb a:hover {
    color: var(--g4-accent-hover) !important;
    text-decoration: underline !important;
}

/* ELEMENT POSITIONING AND OVERLAP FIXES */

/* Fix header overlap with content */
body.grid4-emergency-active #header,
body.grid4-emergency-active .header {
    position: relative !important;
    z-index: 100 !important;
    margin-left: var(--g4-content-offset) !important;
    width: calc(100vw - var(--g4-content-offset)) !important;
    box-sizing: border-box !important;
}

/* Fix floating elements and modals */
body.grid4-emergency-active .modal,
body.grid4-emergency-active .popup,
body.grid4-emergency-active .dropdown {
    z-index: 10000 !important;
    position: fixed !important;
}

/* Fix button positioning in toolbars */
body.grid4-emergency-active .toolbar,
body.grid4-emergency-active .button-toolbar {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: var(--g4-space-sm) !important;
    align-items: center !important;
    margin-bottom: var(--g4-space-md) !important;
}

/* Fix pagination and footer positioning */
body.grid4-emergency-active .pagination,
body.grid4-emergency-active .footer {
    margin-top: var(--g4-space-lg) !important;
    clear: both !important;
    width: 100% !important;
}

/* Fix search and filter bars */
body.grid4-emergency-active .search-bar,
body.grid4-emergency-active .filter-bar {
    width: 100% !important;
    margin-bottom: var(--g4-space-md) !important;
    display: flex !important;
    flex-wrap: wrap !important;
    gap: var(--g4-space-sm) !important;
}

/* FINAL OVERRIDE - Absolute emergency backstop */
body.grid4-emergency-active {
    /* Force application of all Grid4 styles */
    background: var(--g4-bg-primary) !important;
    color: var(--g4-text-primary) !important;
    font-family: var(--g4-font-family) !important;
    position: relative !important;
}

/* PERFORMANCE FIX - Targeted transitions instead of universal selector */
body.grid4-emergency-active a,
body.grid4-emergency-active button,
body.grid4-emergency-active input,
body.grid4-emergency-active select,
body.grid4-emergency-active textarea,
body.grid4-emergency-active .btn,
body.grid4-emergency-active .grid4-nav-link {
    /* Apply transitions only to interactive elements for better performance */
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease !important;
}

/* FEATURE MODAL STYLING - Single source of truth for modal appearance */
.grid4-feature-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background: rgba(0, 0, 0, 0.8) !important;
    z-index: 999999 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
}

.grid4-modal-content {
    background: #1e2736 !important;
    padding: 2rem !important;
    border-radius: 12px !important;
    max-width: 700px !important;
    width: 90% !important;
    color: #f3f4f6 !important;
    max-height: 80vh !important;
    overflow-y: auto !important;
}

.grid4-modal-header {
    margin: 0 0 1rem 0 !important;
    color: #00d4ff !important;
    font-size: 1.5rem !important;
    font-weight: 600 !important;
}

.grid4-status-card {
    margin-bottom: 1.5rem !important;
    padding: 1rem !important;
    background: rgba(0, 212, 255, 0.1) !important;
    border-radius: 8px !important;
    border-left: 4px solid #00d4ff !important;
}

.grid4-status-title {
    margin: 0 0 0.5rem 0 !important;
    font-size: 1.1rem !important;
    color: #00d4ff !important;
    font-weight: 600 !important;
}

.grid4-status-list {
    margin: 0 !important;
    padding-left: 1.5rem !important;
    color: #d1d5db !important;
}

.grid4-info-section {
    margin-bottom: 1.5rem !important;
}

.grid4-info-title {
    margin: 0 0 0.5rem 0 !important;
    font-size: 1.1rem !important;
    color: #f3f4f6 !important;
    font-weight: 600 !important;
}

.grid4-info-list {
    margin: 0 !important;
    padding-left: 1.5rem !important;
    color: #d1d5db !important;
}

.grid4-debug-section {
    margin-bottom: 1.5rem !important;
}

.grid4-debug-buttons {
    display: flex !important;
    gap: 0.5rem !important;
    flex-wrap: wrap !important;
}

.grid4-debug-btn {
    border: none !important;
    padding: 8px 12px !important;
    border-radius: 4px !important;
    cursor: pointer !important;
    font-size: 12px !important;
    font-weight: 500 !important;
    transition: background-color 0.2s ease !important;
}

.grid4-debug-btn.primary {
    background: #667eea !important;
    color: white !important;
}

.grid4-debug-btn.success {
    background: #10b981 !important;
    color: white !important;
}

.grid4-debug-btn.warning {
    background: #f59e0b !important;
    color: white !important;
}

.grid4-debug-btn:hover {
    filter: brightness(1.1) !important;
}

.grid4-modal-footer {
    text-align: center !important;
}

.grid4-close-btn {
    background: #ef4444 !important;
    color: white !important;
    border: none !important;
    padding: 10px 20px !important;
    border-radius: 6px !important;
    cursor: pointer !important;
    font-size: 14px !important;
    font-weight: 500 !important;
    transition: background-color 0.2s ease !important;
}

.grid4-close-btn:hover {
    background: #dc2626 !important;
}